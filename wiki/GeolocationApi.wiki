#summary Quick getting started introduction to the Geolocation API
#labels Featured,Phase-Implementation,API-Geolocation

= Introduction =
The Geolocation API ([http://code.google.com/p/gwt-mobile-webkit/downloads/list?q=label:API-Geolocation download]) leverages the [http://www.w3.org/TR/geolocation-API/ W3C Geolocation API].

As of June 2009 some browsers started to add support for this API, specifically Firefox 3.5 and iPhone Safari 3.0. This API gives you the [http://en.wikipedia.org/wiki/World_Geodetic_System WGS84 coordinates] of the location of the browser.

= Browser support =
Not every browser supports this feature. Fortunately, there is a fallback scenario to rely on the Gears plugin (which as of version 0.9 is only enabled for Opera) for that API is very similar. We built support for the following browsers:

  # iPhone Safari (OS3.0)
  # Firefox (3.5)
  # Opera Mobile (9.7 but untested!)

= Usage =
== Add the Geolocation API to your project ==
First, copy the `gwt-html5-geolocation-x.x.x.jar` file to your project classpath. This jar contains everything you need to use the Geolocation API.

Next, in your GWT module `gwt.xml` file (which uses the Geolocation API), add the following entry:
{{{
<inherits name="com.google.code.gwt.geolocation.Html5Geolocation" />
}}}
This imports the Geolocation API into your module. Now you are ready to use the API!

== is API supported? ==
The following code will test whether the API is supported in your browser:
{{{
if (Geolocation.isSupported()) {
    // get your Geo location...
}
}}}

== Getting a Geolocation instance ==
{{{
Geolocation geo = Geolocation.getGeolocation();
}}}

== Obtaining your position ==
{{{
geo.getCurrentPosition(new PositionCallback() {
    public void onFailure(PositionError error) {
        // Handle failure
    }
    public void onSuccess(Position position) {
        Coordinates coords = position.getCoords();
        // ...
    }
});
}}}
The location is enclosed in the `Position` instance returned in the `onSuccess()` callback method:
{{{
//...
Coordinates coords = position.getCoords();
double latitude = coords.getLatitude();
double longitude = coords.getLongitude();
double accuracy = coords.getAccuracy();
}}}